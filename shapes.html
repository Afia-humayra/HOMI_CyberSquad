<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

<script>
  function launchConfetti() {
    confetti({
      particleCount: 100,
      spread: 70,
      origin: { y: 0.6 }
    });
  }
</script>

  <meta charset="UTF-8">
  <title>Shapes Learning Game</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      margin: 0;
      padding: 0;
      background: #fffae6;
      text-align: center;
    }

    .card {
      margin: 40px auto;
      width: 85%;
      max-width: 1000px;
      padding: 40px;
      border-radius: 25px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      background: white;
    }

    .shape-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 60px;
      margin: 40px 0;
    }

    .shape-img {
      max-width: 250px;
      height: auto;
      animation: bounce 5s infinite alternate;
    }

    .example-img {
      max-width: 220px;
      height: auto;
      border-radius: 12px;
    }

    @keyframes bounce {
      from { transform: scale(1); }
      to { transform: scale(1.1); }
    }

    h1 {
      font-size: 40px;
      margin-top: 20px;
      color: #ff5722;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 10px;
      color: #3f51b5;
    }

    p {
      font-size: 20px;
      color: #333;
    }

    .btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 12px 24px;
      margin-top: 20px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 18px;
      transition: 0.5s;
    }

    .btn:hover {
      background: #388e3c;
    }

    #quiz {
      display: none;
      margin-top: 30px;
    }

    .quiz-option {
      display: inline-block;
      background: #ffcc00;
      margin: 15px;
      padding: 25px 40px;
      border-radius: 16px;
      cursor: pointer;
      font-size: 22px;
      font-weight: bold;
      transition: 0.5s;
    }

    .quiz-option:hover {
      background: #ffaa00;
    }

    /* Popup styles */
    .popup {
      position: fixed;
      left: 50%;
      top: 40%;
      transform: translate(-50%, -50%) scale(1);
      min-width: 260px;
      max-width: 90%;
      padding: 18px 24px;
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      font-size: 24px;
      font-weight: 700;
      color: white;
      z-index: 9999;
      text-align: center;
      opacity: 0;
      transition: opacity 220ms ease, transform 220ms ease;
      pointer-events: none;
    }

    .popup.show {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.02);
      pointer-events: auto;
    }

    .popup.success { background: linear-gradient(45deg,#2ecc71,#27ae60); }
    .popup.error   { background: linear-gradient(45deg,#e74c3c,#c0392b); }
  </style>
</head>
<body>

  <h1>‚ú® Learn Shapes ‚ú®</h1>

  <div class="card" id="slides">
    <h2 id="shape-name"></h2>
    <p id="shape-info"></p>
    <div class="shape-container">
      <img id="shape-img" class="shape-img" src="" alt="Shape">
      <img id="example-img" class="example-img" src="" alt="Example">
    </div>
    <button class="btn" onclick="nextShape()">Next ‚û°Ô∏è</button>
  </div>

  <div class="card" id="quiz">
    <h2>üéâ Quiz Time! üéâ</h2>
    <p id="quiz-question"></p>
    <div id="options"></div>
  </div>

  <!-- Popup for results -->
  <div id="popup" class="popup" style="display:none;"></div>

  <script>
    // Soft pop sound
    function playPop() {
      if (!window._sharedAudioCtx) {
        window._sharedAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      const audioCtx = window._sharedAudioCtx;
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = 'sine';
      o.frequency.setValueAtTime(550 + Math.random()*60, audioCtx.currentTime);
      g.gain.setValueAtTime(0.10, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.12);
      o.connect(g); g.connect(audioCtx.destination);
      o.start();
      o.stop(audioCtx.currentTime + 0.12);
    }

    function showPopup(message, isSuccess = true, duration = 1400) {
      const popup = document.getElementById('popup');
      popup.className = 'popup ' + (isSuccess ? 'success' : 'error');
      popup.innerHTML = (isSuccess ? '‚úÖ ' : '‚ùå ') + message;

      popup.classList.add('show');
      playPop();

      if (isSuccess) launchConfetti();

      clearTimeout(popup._hideTimer);
      popup._hideTimer = setTimeout(() => {
        popup.classList.remove('show');
        setTimeout(() => { if (!popup.classList.contains('show')) popup.style.display = 'none'; }, 240);
      }, duration);
      popup.style.display = 'block';
    }

    const shapes = [
      {
        name: "Circle",
        info: "A circle is perfectly round and has no corners or edges.",
        shapeImg: "images/circle.png",
        exampleImg: "images/circle-example.png",
        quizImgs: ["images/pizza.png", "images/earth.png", "images/ball.png"],
        bg: "#fce4ec"
      },
      {
        name: "Square",
        info: "A square has 4 equal sides and 4 sharp corners.",
        shapeImg: "images/square.png",
        exampleImg: "images/square-example.png",
        quizImgs: ["images/chessboard.png", "images/box.png", "images/window.png"],
        bg: "#e3f2fd"
      },
      {
        name: "Triangle",
        info: "A triangle has 3 straight sides and 3 corners.",
        shapeImg: "images/triangle.png",
        exampleImg: "images/triangle-example.png",
        quizImgs: ["images/pizza_slice.png", "images/pyramid.png", "images/road_sign.png"],
        bg: "#fff3e0"
      },
      {
        name: "Rectangle",
        info: "A rectangle has 4 sides, with opposite sides the same length.",
        shapeImg: "images/rectangle.png",
        exampleImg: "images/rectangle-example.png",
        quizImgs: ["images/door.png", "images/book.png", "images/tv.png"],
        bg: "#f1f8e9"
      },
      {
        name: "Oval",
        info: "An oval looks like a circle that has been stretched out.",
        shapeImg: "images/oval.png",
        exampleImg: "images/oval-example.png",
        quizImgs: ["images/egg.png", "images/watermelon.png", "images/mirror.png"],
        bg: "#ede7f6"
      },
      {
        name: "Star",
        info: "A star has points that shine outward, just like stars in the night sky.",
        shapeImg: "images/star.png",
        exampleImg: "images/starfruit.png",
        quizImgs: ["images/starfish.png", "images/christmas_star.png", "images/starfruit.png"],
        bg: "#fff9c4"
      },
      {
        name: "Diamond",
        info: "A diamond is like a square turned on its side, with 4 equal sides.",
        shapeImg: "images/diamond.png",
        exampleImg: "images/jewel.png",
        quizImgs: ["images/kite.png", "images/playingcard.png", "images/jewel.png"],
        bg: "#e0f7fa"
      }
    ];

    let current = 0;

    function showShape() {
      if (current < shapes.length) {
        const shape = shapes[current];
        document.getElementById("shape-name").innerText = shape.name;
        document.getElementById("shape-info").innerText = shape.info;
        document.getElementById("shape-img").src = shape.shapeImg;
        document.getElementById("example-img").src = shape.exampleImg;
        document.body.style.background = shape.bg;
      } else {
        document.getElementById("slides").style.display = "none";
        startQuiz();
      }
    }

    function nextShape() {
      playPop();
      current++;
      showShape();
    }

    function startQuiz() {
      document.getElementById("quiz").style.display = "block";
      generateQuestion();
    }

    function generateQuestion() {
      const randomIndex = Math.floor(Math.random() * shapes.length);
      const correctShape = shapes[randomIndex];
      const questionDiv = document.getElementById("quiz-question");

      questionDiv.innerHTML = "Which shape is this?";
      const quizImg = document.createElement("img");
      const randomQuizImg = correctShape.quizImgs[Math.floor(Math.random() * correctShape.quizImgs.length)];
      quizImg.src = randomQuizImg;
      quizImg.style.display = "block";
      quizImg.style.margin = "20px auto";
      quizImg.style.maxWidth = "200px";
      questionDiv.appendChild(quizImg);

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      let options = [correctShape.name];
      while (options.length < 4) {
        const random = shapes[Math.floor(Math.random() * shapes.length)].name;
        if (!options.includes(random)) {
          options.push(random);
        }
      }
      options.sort(() => Math.random() - 0.5);

      options.forEach(option => {
        const btn = document.createElement("div");
        btn.className = "quiz-option";
        btn.innerText = option;
        btn.onclick = () => {
          playPop();
          if (option === correctShape.name) {
            showPopup("Correct!", true, 1400);
          } else {
            showPopup("Opps! Incorrect", false, 1000);
          }
          setTimeout(generateQuestion, 1400);
        };
        optionsDiv.appendChild(btn);
      });
    }

    showShape();
  </script>
</body>
</html>
